<%- include('partials/header.ejs') %>
<%- include('partials/navbar.ejs') %>

<div class="container my-5">
  <div class="card shadow-sm">
    <div class="card-header bg-dark text-white">
      <h2 class="mb-0">Cadastrar Pedido</h2>
    </div>
    <div class="card-body">
      <form action="/pedidos/new" method="POST">
        <div class="form-group mb-3">
          <label for="numero">Número do Pedido:</label>
          <input 
            type="number" 
            name="numero" 
            id="numero" 
            class="form-control" 
            placeholder="Insira o número do pedido" 
            required 
          />
        </div>

        <div class="form-group mb-3">
          <label for="valor">Valor do Pedido:</label>
          <input 
            type="number" 
            name="valor" 
            id="valor" 
            class="form-control" 
            placeholder="Insira o valor do pedido" 
            required 
          />
        </div>

        <button type="submit" class="btn btn-info w-100">Cadastrar Pedido</button>
      </form>
      <hr />
    </div>
  </div>
</div>

<div class="container my-5">
  <div class="card shadow-sm">
    <div class="card-header bg-secondary text-white">
      <h2 class="mb-0">Lista de Pedidos</h2>
    </div>
    <div class="card-body">
      <table class="table table-hover">
        <thead class="thead-light">
          <tr>
            <th></th>
            <th>Número</th>
            <th>Valor</th>
            <th colspan="2">Ações</th>
          </tr>
        </thead>
        <tbody>
          <% pedidos.forEach(pedido => { %>
          <tr>
            <td><img src="imgs/order.png" width="40px" alt="Pedido" class="img-thumbnail"></td>
            <td><%= pedido.numero %></td>
            <td>R$ <%= pedido.valor.toFixed(2) %></td>
            <td>
              <a href="/pedidos/edit/<%= pedido.id %>" class="btn btn-warning btn-sm text-white">Editar</a>
            </td>
            <td>
              <a 
                href="/pedidos/delete/<%= pedido.id %>" 
                class="btn btn-danger btn-sm"
                onclick="return confirm('Deseja realmente deletar o pedido <%= pedido.numero %>?')"
              >
                Deletar
              </a>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<%- include('partials/footer.ejs') %>
